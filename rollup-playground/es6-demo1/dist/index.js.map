{"version":3,"file":"index.js","sources":["../src/decorate3.js","../src/index.js"],"sourcesContent":["class Model1 {\n    getData() {\n      // 此处省略获取数据的逻辑\n      return [{\n        id: 1,\n        name: 'Niko'\n      }, {\n        id: 2,\n        name: 'Bellic'\n      }]\n    }\n  }\n  \n\n  function wrap(Model, key) {\n    // 获取Class对应的原型\n    let target = Model.prototype\n  \n    // 获取函数对应的描述符\n    let descriptor = Object.getOwnPropertyDescriptor(target, key)\n  \n    // 生成新的函数，添加耗时统计逻辑\n    let log = function (...arg) {\n      let start = new Date().valueOf()\n      try {\n        return descriptor.value.apply(this, arg) // 调用之前的函数\n      } finally {\n        let end = new Date().valueOf()\n        console.log(`start: ${start} end: ${end} consume: ${end - start}`)\n      }\n    }\n  \n    // 将修改后的函数重新定义到原型链上\n    Object.defineProperty(target, key, {\n      ...descriptor,\n      value: log      // 覆盖描述符重的value\n    })\n  }\n  \n  wrap(Model1, 'getData')\n  \n  // start: XXX end: XXX consume: XXX\n  console.log(new Model1().getData())     // [ { id: 1, name: 'Niko'}, { id: 2, name: 'Bellic' } ]\n  // start: XXX end: XXX consume: XXX\n  ","\nimport './decorate3'\n\nlet a = 1;\nconsole.log(a);\nclass  Test  {\n   constructor(a,b){\n    this.a = a;\n    this.b=b;\n   }\n}\n\nconst ins = new Test(1,2);\nexport default ins;\n"],"names":["Model1","id","name","wrap","Model","key","target","prototype","descriptor","Object","getOwnPropertyDescriptor","log","start","Date","valueOf","arg","value","apply","end","console","defineProperty","getData","a","Test","b","ins"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;;;;;;;aACF,SAAU,OAAA,GAAA;EACR;EACA,MAAA,OAAO,CAAC;EACNC,QAAAA,EAAE,EAAE,CADE;EAENC,QAAAA,IAAI,EAAE,MAAA;EAFA,OAAD,EAGJ;EACDD,QAAAA,EAAE,EAAE,CADH;EAEDC,QAAAA,IAAI,EAAE,QAAA;EAFL,OAHI,CAAP,CAAA;EAOD,KAAA;;;;;;EAIH,SAASC,IAAT,CAAcC,KAAd,EAAqBC,GAArB,EAA0B;EACxB;EACA,EAAA,IAAIC,MAAM,GAAGF,KAAK,CAACG,SAAnB,CAFwB;;IAKxB,IAAIC,UAAU,GAAGC,MAAM,CAACC,wBAAP,CAAgCJ,MAAhC,EAAwCD,GAAxC,CAAjB,CALwB;;EAQxB,EAAA,IAAIM,GAAG,GAAG,SAANA,GAAM,GAAkB;EAC1B,IAAA,IAAIC,KAAK,GAAG,IAAIC,IAAJ,EAAA,CAAWC,OAAX,EAAZ,CAAA;;MACA,IAAI;EAAA,MAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAFiBC,GAEjB,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;UAFiBA,GAEjB,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,OAAA;;QACF,OAAOP,UAAU,CAACQ,KAAX,CAAiBC,KAAjB,CAAuB,IAAvB,EAA6BF,GAA7B,CAAP,CADE;EAEH,KAFD,SAEU;EACR,MAAA,IAAIG,GAAG,GAAG,IAAIL,IAAJ,EAAA,CAAWC,OAAX,EAAV,CAAA;QACAK,OAAO,CAACR,GAAR,CAAsBC,SAAAA,CAAAA,MAAAA,CAAAA,KAAtB,mBAAoCM,GAApC,EAAA,YAAA,CAAA,CAAA,MAAA,CAAoDA,GAAG,GAAGN,KAA1D,CAAA,CAAA,CAAA;EACD,KAAA;EACF,GARD,CARwB;;;EAmBxBH,EAAAA,MAAM,CAACW,cAAP,CAAsBd,MAAtB,EAA8BD,GAA9B,oCACKG,UADL,CAAA,EAAA,EAAA,EAAA;MAEEQ,KAAK,EAAEL,GAFT;;EAAA,GAAA,CAAA,CAAA,CAAA;EAID,CAAA;;EAEDR,IAAI,CAACH,MAAD,EAAS,SAAT,CAAJ;;EAGAmB,OAAO,CAACR,GAAR,CAAY,IAAIX,MAAJ,EAAaqB,CAAAA,OAAb,EAAZ,CAAA;EACA;;ECxCF,IAAIC,CAAC,GAAG,CAAR,CAAA;EACAH,OAAO,CAACR,GAAR,CAAYW,CAAZ,CAAA,CAAA;;EACOC,IAAAA,oBACJ,YAAA,CAAA,SAAA,IAAA,CAAYD,CAAZ,EAAcE,CAAd,EAAgB;EAAA,EAAA,eAAA,CAAA,IAAA,EAAA,IAAA,CAAA,CAAA;;IACf,IAAKF,CAAAA,CAAL,GAASA,CAAT,CAAA;IACA,IAAKE,CAAAA,CAAL,GAAOA,CAAP,CAAA;EACA;;AAGEC,MAAAA,GAAG,GAAG,IAAIF,IAAJ,CAAS,CAAT,EAAW,CAAX;;;;;;;;"}